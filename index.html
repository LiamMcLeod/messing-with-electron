<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Steam Switcher</title>

  <!-- Font Awesome -->
  <link rel="stylesheet" href="public/css/all.min.css">

  <!-- Libraries -->
  <link rel="stylesheet" href="public/css/normalize.css">
  <!-- My CSS -->
  <link rel="stylesheet" href="public/app.css">

  <link rel="icon" type="image/png" href="/favicon.ico" />

  <!-- <link rel="import" href="views/account.html">
  <link rel="import" href="views/list.html"> -->
  <script>
    const {
      ipcRenderer
    } = require('electron');
  </script>
</head>

<body>
  <header>
    <a class="hide-account" href="#">
      <i id="account-hide" class="fas fa-times fa-lg hidden"></i>
    </a>
    <a class="show-account" href="#">
      <i id="account-show" class="fas fa-plus fa-lg"></i>
    </a>
  </header>
  <main class="content js-content">
    <div class="container">
      <script>
        ipcRenderer.on('ping', (event, account) => {
          console.log(account);
        })
      </script>
      <!-- TODO GIVE UP ON TEMPLATING AND MOVE TO 
      KEEPING ALL CONTENT WITHIN 
      INDEX AND USING SHOW / HIDE TO DYNAMICALLY 
      DISPLAY AND RENDER THINGS
    
      adjust methods within main to accomodate for that
      such as buttons and stuff.
 
      template content not clickable no events work on them

      maybe document.write() templates instead of JQuery appends??
      I don't know

      see delegated bindings which I'm sure I was using but just in case
      https://stackoverflow.com/questions/6658752/click-event-doesnt-work-on-dynamically-generated-elements
    -->
      <!-- Account List -->
      <div id="list" class="content-body list hidden">
        <script>
          // TODO CODE TO LOOP THROUGH STORAGE and document write the below -->
        </script>
        <!-- ROW ONE -->
        <div class="columns inline-flex">
          <!-- COL - 1 -->
          <div class="column is-5-mobile is-offset-1-mobile">
            <div class="card">
              <header class="card-header">
                <p class="card-header-title">
                  Account Name
                </p>
                <a href="#" class="card-header-icon" aria-label="more options">
                  <span class="icon">
                    <i class="fas fa-angle-down" aria-hidden="true"></i>
                  </span>
                </a>
              </header>
              <div class="card-content">
                <div class="content">
                  Misc Account Details Go Here Perhaps pulled from API
                </div>
              </div>
              <footer class="card-footer">
                <a data-id="1" href="#" class="card-footer-item">Launch</a>
              </footer>
            </div>
          </div>
          <!-- COL - 2 -->
          <div class="column is-5-mobile">

          </div>
          <div class="column is-1-mobile">

          </div>
        </div>
      </div>

      <!-- Add Account -->
      <div id="account" class="content-body account hidden">
        <div class="columns">
          <div class="column is-8-mobile is-offset-2-mobile">
            <form id="account-form">

              <div class="field">
                <label class="label">Name</label>
                <div class="control has-icons-left has-icons-right">
                  <input id="name" class="input" type="text" placeholder="Name" value="">
                  <span class="icon is-small is-left">
                    <i class="fas fa-pencil-alt"></i>
                  </span>
                </div>
              </div>
              <div class="field">
                <label class="label">Username</label>
                <div class="control has-icons-left has-icons-right">
                  <input id="username" class="input" type="text" placeholder="Username" value="">
                  <span class="icon is-small is-left">
                    <i class="fas fa-user"></i>
                  </span>
                </div>
              </div>

              <div class="field">
                <label class="label">Password</label>
                <p class="control has-icons-left">
                  <input id="password" class="input" type="password" placeholder="Password">
                  <span class="icon is-small is-left">
                    <i class="fas fa-lock"></i>
                  </span>
                </p>
              </div>

              <label class="checkbox">
                <input id="remember" type="checkbox"> Remember me
              </label>

              <div class="field">
                <p class="control">
                  <button id="submitAccount" class="button is-primary fright">
                    Add
                  </button>
                </p>
              </div>
            </form>
          </div>
        </div>
      </div>

    </div>
  </main>
  <footer class="dark">
    <div class="content has-text-centered">
      <a id="modal-show" href="">
        About
      </a>
    </div>
  </footer>
  <!-- We are using Node.js <script>document.write(process.versions.node)</script>, -->
  <!-- Chromium <script>document.write(process.versions.chrome)</script>, -->
  <!-- and Electron <script>document.write(process.versions.electron)</script>.-->
  <script type="text/javascript" src="public/app.js"></script>
  <script>
    $('.card-footer-item').on('click', (e) => {
      launchAccount(e)
    })

    $("#submitAccount").on('click', (e) => {
      var create = {};
      create['name'] = $('#account-form').find('#name').val();
      create['username'] = $('#account-form').find('#username').val();
      create['password'] = $('#account-form').find('#password').val();
      create['remember'] = $('#account-form').find('#remember').is(':checked');;
      //TODO ERROR CHECK
      createAccount(create);
    })

    function createAccount(create) {
      var proc = {}
      proc.post = create;

      //* Send data to main process
      ipcRenderer.send('request-mainprocess-action', proc);
    }

    function launchAccount(e) {
      var proc = {};
      proc.id = $(e.currentTarget).data("id");

      //* Send data to main process
      ipcRenderer.send('request-mainprocess-action', proc);
    }
  </script>
</body>

</html>